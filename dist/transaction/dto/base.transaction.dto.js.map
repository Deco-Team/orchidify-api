{"version":3,"file":"base.transaction.dto.js","sourceRoot":"/","sources":["transaction/dto/base.transaction.dto.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  IsEnum,\r\n  IsInt,\r\n  IsMongoId,\r\n  IsNumber,\r\n  IsOptional,\r\n  IsString,\r\n  Max,\r\n  MaxLength,\r\n  Min,\r\n  ValidateNested\r\n} from 'class-validator'\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger'\r\nimport { TransactionStatus, UserRole } from '@common/contracts/constant'\r\nimport { Type } from 'class-transformer'\r\nimport { PaymentMethod, TransactionType } from '@src/transaction/contracts/constant'\r\nimport { Types } from 'mongoose'\r\nimport { MAX_PRICE, MIN_PRICE } from '@src/config'\r\n\r\nclass BaseTransactionAccountUserDto {\r\n  @ApiProperty({ type: String })\r\n  name?: Types.ObjectId\r\n}\r\nexport class BaseTransactionAccountDto {\r\n  @ApiProperty({ type: String })\r\n  userId?: Types.ObjectId\r\n\r\n  @ApiProperty({ type: String, enum: UserRole })\r\n  userRole: UserRole\r\n\r\n  @ApiPropertyOptional({ type: BaseTransactionAccountUserDto })\r\n  user?: BaseTransactionAccountUserDto\r\n}\r\n\r\nexport class BasePaymentDto {\r\n  @ApiProperty({ type: String })\r\n  id: string\r\n\r\n  @ApiProperty({ type: String })\r\n  code: string\r\n\r\n  @ApiProperty({ type: Date })\r\n  createdAt: Date\r\n\r\n  @ApiProperty({ type: String })\r\n  status: string\r\n\r\n  @ApiPropertyOptional({ type: String })\r\n  description?: string\r\n\r\n  @ApiPropertyOptional({ type: String })\r\n  orderInfo?: string\r\n\r\n  // @ApiProperty({ type: BasePaymentDto, isArray: true })\r\n  histories?: BasePaymentDto[]\r\n}\r\n\r\nexport class BasePayoutDto {\r\n  @ApiProperty({ type: String })\r\n  id: string\r\n\r\n  @ApiProperty({ type: String })\r\n  code: string\r\n\r\n  @ApiProperty({ type: Date })\r\n  createdAt: Date\r\n\r\n  @ApiProperty({ type: String })\r\n  status: string\r\n\r\n  // @ApiProperty({ type: BasePayoutDto, isArray: true })\r\n  histories?: BasePayoutDto[]\r\n}\r\n\r\nexport class BaseTransactionDto {\r\n  @ApiProperty({ type: String })\r\n  @IsMongoId()\r\n  _id: string\r\n\r\n  @ApiProperty({ type: String, enum: TransactionType })\r\n  @IsEnum(TransactionType)\r\n  type: TransactionType\r\n\r\n  @ApiPropertyOptional({ type: String, enum: PaymentMethod })\r\n  @IsOptional()\r\n  @IsEnum(PaymentMethod)\r\n  paymentMethod?: PaymentMethod\r\n\r\n  @ApiProperty({ type: Number, example: 500_000 })\r\n  @IsInt()\r\n  @Min(MIN_PRICE)\r\n  @Max(MAX_PRICE)\r\n  amount: number\r\n\r\n  @ApiProperty({ type: BaseTransactionAccountDto })\r\n  @Type(() => BaseTransactionAccountDto)\r\n  @ValidateNested()\r\n  debitAccount: BaseTransactionAccountDto\r\n\r\n  @ApiProperty({ type: BaseTransactionAccountDto })\r\n  @Type(() => BaseTransactionAccountDto)\r\n  @ValidateNested()\r\n  creditAccount: BaseTransactionAccountDto\r\n\r\n  @ApiProperty({ type: String, example: 'Transaction description' })\r\n  @IsString()\r\n  @MaxLength(500)\r\n  description: string\r\n\r\n  @ApiProperty({ type: String, enum: TransactionStatus })\r\n  @IsEnum(TransactionStatus)\r\n  status: TransactionStatus\r\n\r\n  @ApiProperty({ type: BasePaymentDto })\r\n  @IsOptional()\r\n  @Type(() => BasePaymentDto)\r\n  @ValidateNested()\r\n  payment?: BasePaymentDto\r\n\r\n  @ApiProperty({ type: BasePayoutDto })\r\n  @IsOptional()\r\n  @Type(() => BasePayoutDto)\r\n  @ValidateNested()\r\n  payout?: BasePayoutDto\r\n\r\n  @ApiProperty({ type: Date })\r\n  createdAt: Date\r\n\r\n  @ApiProperty({ type: Date })\r\n  updatedAt: Date\r\n}\r\n"]}