{"version":3,"file":"management.report.controller.js","sourceRoot":"/","sources":["report/controllers/management.report.controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { Controller, Get, Inject, Query, UseGuards } from '@nestjs/common'\r\nimport { ApiBadRequestResponse, ApiBearerAuth, ApiOkResponse, ApiOperation, ApiTags } from '@nestjs/swagger'\r\nimport * as _ from 'lodash'\r\n\r\nimport { ErrorResponse } from '@common/contracts/dto'\r\nimport { IReportService } from '@report/services/report.service'\r\nimport {\r\n  QueryReportByMonthDto,\r\n  QueryReportByWeekDto,\r\n  ReportClassByRateListDataResponse,\r\n  ReportClassByStatusListDataResponse,\r\n  ReportCourseByMonthListDataResponse,\r\n  ReportCourseByRateListDataResponse,\r\n  ReportInstructorByMonthListDataResponse,\r\n  ReportInstructorByStatusListDataResponse,\r\n  ReportLearnerByMonthListDataResponse,\r\n  ReportLearnerByStatusListDataResponse,\r\n  ReportRevenueByMonthListDataResponse,\r\n  ReportStaffByStatusListDataResponse,\r\n  ReportTotalSummaryListDataResponse,\r\n  ReportTransactionByDateListDataResponse,\r\n  ReportUserByMonthListDataResponse\r\n} from '@report/dto/view-report.dto'\r\nimport { JwtAuthGuard } from '@auth/guards/jwt-auth.guard'\r\nimport { RolesGuard } from '@auth/guards/roles.guard'\r\nimport { ClassStatus, InstructorStatus, LearnerStatus, StaffStatus, UserRole } from '@common/contracts/constant'\r\nimport { Roles } from '@auth/decorators/roles.decorator'\r\nimport { ReportTag, ReportType } from '@report/contracts/constant'\r\nimport { VN_TIMEZONE } from '@src/config'\r\nimport * as moment from 'moment-timezone'\r\nimport { ITransactionService } from '@transaction/services/transaction.service'\r\nimport { ICourseService } from '@course/services/course.service'\r\nimport { IClassService } from '@class/services/class.service'\r\n\r\n@ApiTags('Report - Management')\r\n@ApiBearerAuth()\r\n@ApiBadRequestResponse({ type: ErrorResponse })\r\n@UseGuards(JwtAuthGuard.ACCESS_TOKEN, RolesGuard)\r\n@Controller('management')\r\nexport class ManagementReportController {\r\n  constructor(\r\n    @Inject(IReportService)\r\n    private readonly reportService: IReportService,\r\n    @Inject(ITransactionService)\r\n    private readonly transactionService: ITransactionService,\r\n    @Inject(ICourseService)\r\n    private readonly courseService: ICourseService,\r\n    @Inject(IClassService)\r\n    private readonly classService: IClassService\r\n  ) {}\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.STAFF}] View Report Data Total Summary`\r\n  })\r\n  @ApiOkResponse({ type: ReportTotalSummaryListDataResponse })\r\n  @Roles(UserRole.STAFF)\r\n  @Get('total-summary')\r\n  async viewReportTotalSummary() {\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.CourseSum, ReportType.LearnerSum, ReportType.InstructorSum, ReportType.CourseComboSum]\r\n        },\r\n        tag: ReportTag.System\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    return { docs: reports }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.STAFF}] View Report User Data By Month`\r\n  })\r\n  @ApiOkResponse({ type: ReportUserByMonthListDataResponse })\r\n  @Roles(UserRole.STAFF)\r\n  @Get('user-by-month')\r\n  async viewReportUserDataByMonth(@Query() queryReportByMonthDto: QueryReportByMonthDto) {\r\n    const { year = 2024 } = queryReportByMonthDto\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.LearnerSumByMonth, ReportType.InstructorSumByMonth]\r\n        },\r\n        tag: ReportTag.System,\r\n        'data.year': year\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    const learnerReport = _.find(reports, { type: ReportType.LearnerSumByMonth })\r\n    const instructorReport = _.find(reports, { type: ReportType.InstructorSumByMonth })\r\n\r\n    const docs = []\r\n    if (learnerReport && instructorReport) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        const learner = _.get(learnerReport.data, `${month}`) || { quantity: 0 }\r\n        const instructor = _.get(instructorReport.data, `${month}`) || { quantity: 0 }\r\n        docs.push({\r\n          learner,\r\n          instructor\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.STAFF}] View Report Class Data By Status`\r\n  })\r\n  @ApiOkResponse({ type: ReportClassByStatusListDataResponse })\r\n  @Roles(UserRole.STAFF)\r\n  @Get('class-by-status')\r\n  async viewReportClassDataByStatus() {\r\n    const report = await this.reportService.findOne({ type: ReportType.ClassSum, tag: ReportTag.System }, [\r\n      'type',\r\n      'data'\r\n    ])\r\n    return {\r\n      quantity: report.data.quantity,\r\n      docs: Object.keys(_.omit(report.data, ['quantity'])).map((statusKey) => ({\r\n        status: ClassStatus[statusKey],\r\n        quantity: report.data[statusKey].quantity\r\n      }))\r\n    }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Data Total Summary`\r\n  })\r\n  @ApiOkResponse({ type: ReportTotalSummaryListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/total-summary')\r\n  async adminViewReportTotalSummary() {\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.CourseSum, ReportType.LearnerSum, ReportType.InstructorSum, ReportType.RevenueSum]\r\n        },\r\n        tag: ReportTag.System\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    return { docs: reports }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Staff Data By Status`\r\n  })\r\n  @ApiOkResponse({ type: ReportStaffByStatusListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/staff-by-status')\r\n  async adminViewReportStaffDataByStatus() {\r\n    const report = await this.reportService.findOne({ type: ReportType.StaffSum, tag: ReportTag.System }, [\r\n      'type',\r\n      'data'\r\n    ])\r\n    return {\r\n      quantity: report.data.quantity,\r\n      docs: Object.keys(_.omit(report.data, ['quantity'])).map((statusKey) => ({\r\n        status: StaffStatus[statusKey],\r\n        quantity: report.data[statusKey].quantity\r\n      }))\r\n    }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Revenue Data By Month`\r\n  })\r\n  @ApiOkResponse({ type: ReportRevenueByMonthListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/revenue-by-month')\r\n  async adminViewReportRevenueDataByMonth(@Query() queryReportByMonthDto: QueryReportByMonthDto) {\r\n    const { year = 2024 } = queryReportByMonthDto\r\n    let [revenueSumByMonth] = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.RevenueSumByMonth]\r\n        },\r\n        tag: ReportTag.System,\r\n        'data.year': year\r\n      },\r\n      ['type', 'data']\r\n    )\r\n\r\n    const docs = []\r\n    if (revenueSumByMonth) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        const revenue = _.get(revenueSumByMonth.data, `${month}`) || { total: 0 }\r\n        docs.push({\r\n          revenue\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Transaction Data By Date`\r\n  })\r\n  @ApiOkResponse({ type: ReportTransactionByDateListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/transaction-by-date')\r\n  async adminViewReportTransactionByDate(@Query() queryReportByWeekDto: QueryReportByWeekDto) {\r\n    const { date } = queryReportByWeekDto\r\n    const dateMoment = moment(date).tz(VN_TIMEZONE)\r\n\r\n    let fromDate: Date, toDate: Date\r\n    fromDate = dateMoment.clone().startOf('isoWeek').toDate()\r\n    toDate = dateMoment.clone().endOf('isoWeek').toDate()\r\n\r\n    const reports = await this.transactionService.viewReportTransactionByDate({ fromDate, toDate })\r\n\r\n    return {\r\n      docs: reports.map((report) => {\r\n        return {\r\n          ...report,\r\n          date: new Date(_.get(report, '_id'))\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Course Data By Month`\r\n  })\r\n  @ApiOkResponse({ type: ReportCourseByMonthListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/course-by-month')\r\n  async viewReportCourseDataByMonth(@Query() queryReportByMonthDto: QueryReportByMonthDto) {\r\n    const { year = 2024 } = queryReportByMonthDto\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.CourseSumByMonth]\r\n        },\r\n        tag: ReportTag.System,\r\n        'data.year': year\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    const courseReport = _.find(reports, { type: ReportType.CourseSumByMonth })\r\n\r\n    const docs = []\r\n    if (courseReport) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        const course = _.get(courseReport.data, `${month}`) || { quantity: 0 }\r\n        docs.push({\r\n          course\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Course Data By Rate`\r\n  })\r\n  @ApiOkResponse({ type: ReportCourseByRateListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/course-by-rate')\r\n  async viewReportCourseDataByRate() {\r\n    const reports = await this.courseService.viewReportCourseByRate()\r\n\r\n    const docs = []\r\n    const idSet = new Set(reports.map((item) => item._id))\r\n\r\n    for (let i = 0; i <= 4; i++) {\r\n      if (idSet.has(i)) {\r\n        docs.push(reports.find((item) => item._id === i))\r\n      } else {\r\n        docs.push({\r\n          _id: i,\r\n          count: 0\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Class Data By Status`\r\n  })\r\n  @ApiOkResponse({ type: ReportClassByStatusListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/class-by-status')\r\n  async adminViewReportClassDataByStatus() {\r\n    const report = await this.reportService.findOne({ type: ReportType.ClassSum, tag: ReportTag.System }, [\r\n      'type',\r\n      'data'\r\n    ])\r\n    return {\r\n      quantity: report.data.quantity,\r\n      docs: Object.keys(_.omit(report.data, ['quantity'])).map((statusKey) => ({\r\n        status: ClassStatus[statusKey],\r\n        quantity: report.data[statusKey].quantity\r\n      }))\r\n    }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Class Data By Rate`\r\n  })\r\n  @ApiOkResponse({ type: ReportClassByRateListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/class-by-rate')\r\n  async viewReportClassDataByRate() {\r\n    const reports = await this.classService.viewReportClassByRate()\r\n\r\n    const docs = []\r\n    const idSet = new Set(reports.map((item) => item._id))\r\n\r\n    for (let i = 0; i <= 4; i++) {\r\n      if (idSet.has(i)) {\r\n        docs.push(reports.find((item) => item._id === i))\r\n      } else {\r\n        docs.push({\r\n          _id: i,\r\n          count: 0\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Instructor Data By Month`\r\n  })\r\n  @ApiOkResponse({ type: ReportInstructorByMonthListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/instructor-by-month')\r\n  async viewReportInstructorDataByMonth(@Query() queryReportByMonthDto: QueryReportByMonthDto) {\r\n    const { year = 2024 } = queryReportByMonthDto\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.InstructorSumByMonth]\r\n        },\r\n        tag: ReportTag.System,\r\n        'data.year': year\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    const instructorReport = _.find(reports, { type: ReportType.InstructorSumByMonth })\r\n\r\n    const docs = []\r\n    if (instructorReport) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        const instructor = _.get(instructorReport.data, `${month}`) || { quantity: 0 }\r\n        docs.push({\r\n          instructor\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Instructor Data By Status`\r\n  })\r\n  @ApiOkResponse({ type: ReportInstructorByStatusListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/instructor-by-status')\r\n  async adminViewReportInstructorDataByStatus() {\r\n    const report = await this.reportService.findOne({ type: ReportType.InstructorSum, tag: ReportTag.System }, [\r\n      'type',\r\n      'data'\r\n    ])\r\n    return {\r\n      quantity: report.data.quantity,\r\n      docs: Object.keys(_.omit(report.data, ['quantity'])).map((statusKey) => ({\r\n        status: InstructorStatus[statusKey],\r\n        quantity: report.data[statusKey].quantity\r\n      }))\r\n    }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Learner Data By Month`\r\n  })\r\n  @ApiOkResponse({ type: ReportLearnerByMonthListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/learner-by-month')\r\n  async viewReportLearnerDataByMonth(@Query() queryReportByMonthDto: QueryReportByMonthDto) {\r\n    const { year = 2024 } = queryReportByMonthDto\r\n    const reports = await this.reportService.findMany(\r\n      {\r\n        type: {\r\n          $in: [ReportType.LearnerSumByMonth]\r\n        },\r\n        tag: ReportTag.System,\r\n        'data.year': year\r\n      },\r\n      ['type', 'data']\r\n    )\r\n    const learnerReport = _.find(reports, { type: ReportType.LearnerSumByMonth })\r\n\r\n    const docs = []\r\n    if (learnerReport) {\r\n      for (let month = 1; month <= 12; month++) {\r\n        const learner = _.get(learnerReport.data, `${month}`) || { quantity: 0 }\r\n        docs.push({\r\n          learner\r\n        })\r\n      }\r\n    }\r\n    return { docs }\r\n  }\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.ADMIN}] View Report Learner Data By Status`\r\n  })\r\n  @ApiOkResponse({ type: ReportLearnerByStatusListDataResponse })\r\n  @Roles(UserRole.ADMIN)\r\n  @Get('admin/learner-by-status')\r\n  async adminViewReportLearnerDataByStatus() {\r\n    const report = await this.reportService.findOne({ type: ReportType.LearnerSum, tag: ReportTag.System }, [\r\n      'type',\r\n      'data'\r\n    ])\r\n    return {\r\n      quantity: report.data.quantity,\r\n      docs: Object.keys(_.omit(report.data, ['quantity'])).map((statusKey) => ({\r\n        status: LearnerStatus[statusKey],\r\n        quantity: report.data[statusKey].quantity\r\n      }))\r\n    }\r\n  }\r\n}\r\n"]}