{"version":3,"file":"view-class.dto.js","sourceRoot":"/","sources":["class/dto/view-class.dto.ts"],"names":[],"mappings":"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","sourcesContent":["import { ApiProperty, ApiPropertyOptional, PickType } from '@nestjs/swagger'\r\nimport { BaseClassDto } from './base.class.dto'\r\nimport { DataResponse, PaginateResponse } from '@common/contracts/openapi-builder'\r\nimport { IsInt, IsOptional, IsString, Max, MaxLength, Min } from 'class-validator'\r\nimport { ClassStatus, CourseLevel } from '@common/contracts/constant'\r\nimport { Transform, Type } from 'class-transformer'\r\nimport {\r\n  CLASS_DETAIL_PROJECTION,\r\n  CLASS_LIST_PROJECTION,\r\n  GARDEN_MANAGER_VIEW_CLASS_DETAIL_PROJECTION,\r\n  LEARNER_VIEW_MY_CLASS_DETAIL_PROJECTION,\r\n  LEARNER_VIEW_MY_CLASS_LIST_PROJECTION\r\n} from '@src/class/contracts/constant'\r\nimport { BaseGardenDto } from '@garden/dto/base.garden.dto'\r\nimport { BaseInstructorDto } from '@instructor/dto/base.instructor.dto'\r\nimport { LearnerDetailResponse } from '@learner/dto/view-learner.dto'\r\nimport { MY_CLASS_INSTRUCTOR_DETAIL_PROJECTION } from '@instructor/contracts/constant'\r\n\r\nexport class QueryClassDto {\r\n  @ApiPropertyOptional({\r\n    description: 'Title to search'\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(50)\r\n  title: string\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Type to search'\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(100)\r\n  type: string\r\n\r\n  @ApiPropertyOptional({\r\n    enum: CourseLevel,\r\n    isArray: true\r\n  })\r\n  @IsOptional()\r\n  @Transform(({ value }) => (Array.isArray(value) ? value : Array(value)))\r\n  level: CourseLevel[]\r\n\r\n  @ApiPropertyOptional({\r\n    enum: [ClassStatus.PUBLISHED, ClassStatus.IN_PROGRESS, ClassStatus.COMPLETED, ClassStatus.CANCELED],\r\n    isArray: true\r\n  })\r\n  @IsOptional()\r\n  @Transform(({ value }) => (Array.isArray(value) ? value : Array(value)))\r\n  status: ClassStatus[]\r\n\r\n  @ApiPropertyOptional()\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1_000)\r\n  @Max(10_000_000)\r\n  fromPrice: number\r\n\r\n  @ApiPropertyOptional()\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1_000)\r\n  @Max(10_000_000)\r\n  toPrice: number\r\n}\r\n\r\nclass ClassInstructorDetailResponse extends PickType(BaseInstructorDto, ['name']) {}\r\nexport class ClassGardenDetailResponse extends PickType(BaseGardenDto, ['name']) {}\r\nexport class ClassCourseDetailResponse extends PickType(BaseClassDto, ['code']) {}\r\n\r\n// Instructor\r\nclass InstructorViewClassListItemResponse extends PickType(BaseClassDto, CLASS_LIST_PROJECTION) {\r\n  @ApiProperty({ type: ClassCourseDetailResponse })\r\n  course: ClassCourseDetailResponse\r\n}\r\nclass InstructorViewClassListResponse extends PaginateResponse(InstructorViewClassListItemResponse) {}\r\nexport class InstructorViewClassListDataResponse extends DataResponse(InstructorViewClassListResponse) {}\r\n\r\nclass InstructorViewClassDetailResponse extends PickType(BaseClassDto, CLASS_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: ClassGardenDetailResponse })\r\n  garden: ClassGardenDetailResponse\r\n\r\n  @ApiProperty({ type: ClassCourseDetailResponse })\r\n  course: ClassCourseDetailResponse\r\n\r\n  @ApiPropertyOptional({ type: LearnerDetailResponse, isArray: true })\r\n  learners: LearnerDetailResponse[]\r\n}\r\nexport class InstructorViewClassDetailDataResponse extends DataResponse(InstructorViewClassDetailResponse) {}\r\n\r\n// Staff\r\nclass StaffViewClassListItemResponse extends PickType(BaseClassDto, CLASS_LIST_PROJECTION) {}\r\nclass StaffViewClassListResponse extends PaginateResponse(StaffViewClassListItemResponse) {\r\n  @ApiProperty({ type: ClassCourseDetailResponse })\r\n  course: ClassCourseDetailResponse\r\n}\r\nexport class StaffViewClassListDataResponse extends DataResponse(StaffViewClassListResponse) {}\r\n\r\nclass StaffViewClassDetailResponse extends PickType(BaseClassDto, CLASS_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: ClassGardenDetailResponse })\r\n  garden: ClassGardenDetailResponse\r\n\r\n  @ApiProperty({ type: ClassInstructorDetailResponse })\r\n  instructor: ClassInstructorDetailResponse\r\n\r\n  @ApiProperty({ type: ClassCourseDetailResponse })\r\n  course: ClassCourseDetailResponse\r\n\r\n  @ApiPropertyOptional({ type: LearnerDetailResponse, isArray: true })\r\n  learners: LearnerDetailResponse[]\r\n}\r\nexport class StaffViewClassDetailDataResponse extends DataResponse(StaffViewClassDetailResponse) {}\r\n\r\n// GardenManager\r\nclass GardenManagerViewClassDetailResponse extends PickType(BaseClassDto, GARDEN_MANAGER_VIEW_CLASS_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: ClassInstructorDetailResponse })\r\n  instructor: ClassInstructorDetailResponse\r\n\r\n  @ApiProperty({ type: ClassCourseDetailResponse })\r\n  course: ClassCourseDetailResponse\r\n}\r\nexport class GardenManagerViewClassDetailDataResponse extends DataResponse(GardenManagerViewClassDetailResponse) {}\r\n\r\n// Learner - My Classes\r\nclass LearnerViewMyClassListItemResponse extends PickType(BaseClassDto, LEARNER_VIEW_MY_CLASS_LIST_PROJECTION) {\r\n  @ApiProperty({ type: ClassInstructorDetailResponse })\r\n  instructor: ClassInstructorDetailResponse\r\n}\r\nclass LearnerViewMyClassListResponse extends PaginateResponse(LearnerViewMyClassListItemResponse) {}\r\nexport class LearnerViewMyClassListDataResponse extends DataResponse(LearnerViewMyClassListResponse) {}\r\n\r\nclass MyClassInstructorDetailResponse extends PickType(BaseInstructorDto, MY_CLASS_INSTRUCTOR_DETAIL_PROJECTION) {}\r\nclass LearnerViewMyClassDetailResponse extends PickType(BaseClassDto, LEARNER_VIEW_MY_CLASS_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: ClassGardenDetailResponse })\r\n  garden: ClassGardenDetailResponse\r\n\r\n  @ApiProperty({ type: MyClassInstructorDetailResponse })\r\n  instructor: MyClassInstructorDetailResponse\r\n}\r\nexport class LearnerViewMyClassDetailDataResponse extends DataResponse(LearnerViewMyClassDetailResponse) {}\r\n"]}