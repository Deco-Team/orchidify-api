{"version":3,"file":"view-course.dto.js","sourceRoot":"/","sources":["course/dto/view-course.dto.ts"],"names":[],"mappings":"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","sourcesContent":["import { ApiProperty, ApiPropertyOptional, PickType } from '@nestjs/swagger'\r\nimport { BaseCourseDto } from './base.course.dto'\r\nimport { DataResponse, PaginateResponse } from '@common/contracts/openapi-builder'\r\nimport { IsInt, IsOptional, IsString, Max, MaxLength, Min } from 'class-validator'\r\nimport { CourseStatus } from '@common/contracts/constant'\r\nimport { Transform, Type } from 'class-transformer'\r\nimport { COURSE_LIST_PROJECTION, COURSE_DETAIL_PROJECTION } from '@course/contracts/constant'\r\nimport { CourseLevel } from '@src/common/contracts/constant'\r\nimport { BaseInstructorDto } from '@instructor/dto/base.instructor.dto'\r\nimport { BaseSessionDto } from '@class/dto/session.dto'\r\nimport { BaseClassDto } from '@class/dto/base.class.dto'\r\nimport { BaseGardenDto } from '@garden/dto/base.garden.dto'\r\nimport { PUBLIC_COURSE_CLASS_DETAIL_PROJECTION } from '@class/contracts/constant'\r\nimport { PUBLIC_COURSE_INSTRUCTOR_DETAIL_PROJECTION } from '@instructor/contracts/constant'\r\nimport { BaseLearnerDto } from '@learner/dto/base.learner.dto'\r\n\r\nexport class QueryCourseDto {\r\n  @ApiPropertyOptional({\r\n    description: 'Title to search'\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(50)\r\n  title: string\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Type to search'\r\n  })\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(100)\r\n  type: string\r\n\r\n  @ApiPropertyOptional({\r\n    enum: CourseLevel,\r\n    isArray: true\r\n  })\r\n  @IsOptional()\r\n  @Transform(({ value }) => (Array.isArray(value) ? value : Array(value)))\r\n  level: CourseLevel[]\r\n\r\n  @ApiPropertyOptional({\r\n    enum: [CourseStatus.DRAFT, CourseStatus.ACTIVE],\r\n    isArray: true\r\n  })\r\n  @IsOptional()\r\n  @Transform(({ value }) => (Array.isArray(value) ? value : Array(value)))\r\n  status: CourseStatus[]\r\n}\r\n\r\nexport class StaffQueryCourseDto extends QueryCourseDto {\r\n  @ApiPropertyOptional({\r\n    enum: [CourseStatus.ACTIVE],\r\n    isArray: true\r\n  })\r\n  @IsOptional()\r\n  @Transform(({ value }) => (Array.isArray(value) ? value : Array(value)))\r\n  status: CourseStatus[]\r\n}\r\n\r\nexport class PublicQueryCourseDto extends PickType(QueryCourseDto, ['title', 'type', 'level']) {\r\n  @ApiPropertyOptional()\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1_000)\r\n  @Max(10_000_000)\r\n  fromPrice: number\r\n\r\n  @ApiPropertyOptional()\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1_000)\r\n  @Max(10_000_000)\r\n  toPrice: number\r\n}\r\n\r\nclass CourseListItemResponse extends PickType(BaseCourseDto, COURSE_LIST_PROJECTION) {}\r\nclass CourseListResponse extends PaginateResponse(CourseListItemResponse) {}\r\nexport class CourseListDataResponse extends DataResponse(CourseListResponse) {}\r\n\r\nclass PublicCourseInstructorDto extends PickType(BaseInstructorDto, PUBLIC_COURSE_INSTRUCTOR_DETAIL_PROJECTION) {}\r\nclass CourseDetailResponse extends PickType(BaseCourseDto, COURSE_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: PublicCourseInstructorDto })\r\n  instructor: PublicCourseInstructorDto\r\n}\r\nexport class CourseDetailDataResponse extends DataResponse(CourseDetailResponse) {}\r\n\r\nclass PublicCourseListItemResponse extends PickType(BaseCourseDto, COURSE_LIST_PROJECTION) {\r\n  // @ApiProperty({ type: Number })\r\n  // sessionsCount: number\r\n\r\n  @ApiProperty({ type: PublicCourseInstructorDto })\r\n  instructor: PublicCourseInstructorDto\r\n\r\n  @ApiProperty({ type: Number })\r\n  classesCount: number\r\n}\r\nclass PublicCourseListResponse extends PaginateResponse(PublicCourseListItemResponse) {}\r\nexport class PublishCourseListDataResponse extends DataResponse(PublicCourseListResponse) {}\r\n\r\nclass PublicCourseClassGardenDto extends PickType(BaseGardenDto, ['_id', 'name']) {}\r\nclass PublicCourseSessionDto extends PickType(BaseSessionDto, ['_id', 'title']) {}\r\nclass PublicCourseLearnerClassDto extends PickType(BaseLearnerDto, ['_id']) {}\r\nclass PublicCourseClassDto extends PickType(BaseClassDto, PUBLIC_COURSE_CLASS_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: PublicCourseClassGardenDto })\r\n  garden: PublicCourseClassGardenDto\r\n\r\n  @ApiPropertyOptional({ type: PublicCourseLearnerClassDto })\r\n  learnerClass: PublicCourseLearnerClassDto\r\n}\r\nclass PublicCourseDetailResponse extends PickType(BaseCourseDto, COURSE_DETAIL_PROJECTION) {\r\n  @ApiProperty({ type: PublicCourseInstructorDto })\r\n  instructor: PublicCourseInstructorDto\r\n\r\n  @ApiProperty({ type: PublicCourseSessionDto, isArray: true })\r\n  sessions: BaseSessionDto[]\r\n\r\n  @ApiProperty({ type: PublicCourseClassDto, isArray: true })\r\n  classes: PublicCourseClassDto\r\n}\r\nexport class PublicCourseDetailDataResponse extends DataResponse(PublicCourseDetailResponse) {}\r\n"]}