{"version":3,"file":"discord.service.js","sourceRoot":"/","sources":["common/services/discord.service.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAA2C;AAC3C,2CAA8C;AAC9C,2CAAyD;AAGlD,IAAM,cAAc,GAApB,MAAM,cAAc;IAEzB,YAA6B,aAA4B;QAA5B,kBAAa,GAAb,aAAa,CAAe;QACvD,IAAI,CAAC,aAAa,GAAG,IAAI,0BAAa,CAAC;YACrC,EAAE,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,mBAAmB,CAAC;YAC/C,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,sBAAsB,CAAC;SACtD,CAAC,CAAA;IACJ,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,EAAE,OAAO,EAAE,MAAM,EAAkD;QACnF,IAAI,CAAC;YACH,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;gBAC5B,OAAO;gBACP,QAAQ,EAAE,mBAAmB;gBAC7B,SAAS,EAAE,wCAAwC;gBACnD,MAAM,EAAE;oBACN;wBACE,KAAK,EAAE,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;wBAClD,KAAK,EAAE,QAAQ;wBACf,MAAM;qBACP;iBACF;aACF,CAAC,CAAA;QACJ,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC,CAAA,CAAC;IAClB,CAAC;CACF,CAAA;AAzBY,wCAAc;yBAAd,cAAc;IAD1B,IAAA,mBAAU,GAAE;qCAGiC,sBAAa;GAF9C,cAAc,CAyB1B","sourcesContent":["import { Injectable } from '@nestjs/common'\r\nimport { ConfigService } from '@nestjs/config'\r\nimport { APIEmbedField, WebhookClient } from 'discord.js'\r\n\r\n@Injectable()\r\nexport class DiscordService {\r\n  webhookClient: WebhookClient\r\n  constructor(private readonly configService: ConfigService) {\r\n    this.webhookClient = new WebhookClient({\r\n      id: this.configService.get('discord.webhookId'),\r\n      token: this.configService.get('discord.webhookToken')\r\n    })\r\n  }\r\n\r\n  async sendMessage({ content, fields }: { content?: string; fields?: APIEmbedField[] }) {\r\n    try {\r\n      await this.webhookClient.send({\r\n        content,\r\n        username: `Orchidify API Bot`,\r\n        avatarURL: 'https://cdn.pfps.gg/pfps/3323-como.gif',\r\n        embeds: [\r\n          {\r\n            title: `ENV ${this.configService.get('NODE_ENV')}`,\r\n            color: 0x00ffff,\r\n            fields\r\n          }\r\n        ]\r\n      })\r\n    } catch (err) {}\r\n  }\r\n}\r\n"]}