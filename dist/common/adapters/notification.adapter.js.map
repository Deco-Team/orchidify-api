{"version":3,"file":"notification.adapter.js","sourceRoot":"/","sources":["common/adapters/notification.adapter.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,uEAA+D;AAC/D,mDAAsD;AACtD,2CAA2C;AAUpC,IAAM,mBAAmB,2BAAzB,MAAM,mBAAmB;IAE9B,YAA6B,WAA0B;QAA1B,gBAAW,GAAX,WAAW,CAAe;QADvC,eAAU,GAAG,IAAI,8BAAS,CAAC,qBAAmB,CAAC,IAAI,CAAC,CAAA;IACV,CAAC;IAE3D,KAAK,CAAC,QAAQ,CAAC,OAAwB;QACrC,IAAI,CAAC;YACH,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,qBAAmB,CAAC,IAAI,qBAAqB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAC/F,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;QAC1C,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,qBAAmB,CAAC,IAAI,sBAAsB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;QAC1G,CAAC;IACH,CAAC;CACF,CAAA;AAZY,kDAAmB;8BAAnB,mBAAmB;IAD/B,IAAA,mBAAU,GAAE;qCAG+B,sBAAa;GAF5C,mBAAmB,CAY/B","sourcesContent":["import { AppLogger } from '@common/services/app-logger.service'\r\nimport { MailerService } from '@nestjs-modules/mailer'\r\nimport { Injectable } from '@nestjs/common'\r\n\r\nexport interface MailSendOptions {\r\n  to: string | string[]\r\n  subject: string\r\n  template: string\r\n  context?: Record<string, any>\r\n}\r\n\r\n@Injectable()\r\nexport class NotificationAdapter {\r\n  public readonly _appLogger = new AppLogger(NotificationAdapter.name)\r\n  constructor(private readonly mailService: MailerService) {}\r\n\r\n  async sendMail(options: MailSendOptions) {\r\n    try {\r\n      this._appLogger.log(`[${NotificationAdapter.name}] [success] data= ${JSON.stringify(options)}`)\r\n      await this.mailService.sendMail(options)\r\n    } catch (error) {\r\n      this._appLogger.error(`[${NotificationAdapter.name}] [failed] error = ${JSON.stringify(error.message)}`)\r\n    }\r\n  }\r\n}\r\n"]}