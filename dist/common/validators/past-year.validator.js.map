{"version":3,"file":"past-year.validator.js","sourceRoot":"/","sources":["common/validators/past-year.validator.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2CAAgD;AAChD,qDAMwB;AAGxB,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;IACrB,QAAQ,CAAC,KAAW,EAAE,mBAAyC;QAC7D,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;QACtB,MAAM,QAAQ,GAAG,mBAAmB,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE,CAAA;QAEzD,OAAO,GAAG,CAAC,WAAW,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,IAAI,QAAQ,CAAA;IACtE,CAAC;IAED,cAAc,CAAC,IAA0B;QACvC,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE,CAAA;QAC1C,OAAO,2BAA2B,QAAQ,iBAAiB,CAAA;IAC7D,CAAC;CACF,CAAA;AAZK,iBAAiB;IADtB,IAAA,qCAAmB,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;GACpC,iBAAiB,CAYtB;AAED,SAAgB,QAAQ,CAAC,WAAmB,EAAE;IAC5C,OAAO,IAAA,wBAAe,EAAC,IAAA,8BAAY,EAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAE,IAAA,0BAAQ,EAAC,iBAAiB,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;AACjG,CAAC;AAFD,4BAEC","sourcesContent":["import { applyDecorators } from '@nestjs/common'\r\nimport {\r\n  ValidatorConstraint,\r\n  ValidatorConstraintInterface,\r\n  ValidationArguments,\r\n  Validate,\r\n  IsDateString\r\n} from 'class-validator'\r\n\r\n@ValidatorConstraint({ name: 'pastYear' })\r\nclass PastYearValidator implements ValidatorConstraintInterface {\r\n  validate(value: Date, validationArguments?: ValidationArguments): boolean {\r\n    const now = new Date()\r\n    const yearsAgo = validationArguments.constraints[0] || 10\r\n\r\n    return now.getFullYear() - new Date(value).getFullYear() >= yearsAgo\r\n  }\r\n\r\n  defaultMessage(args?: ValidationArguments) {\r\n    const yearsAgo = args.constraints[0] || 10\r\n    return `Date must be older than ${yearsAgo} years from now`\r\n  }\r\n}\r\n\r\nexport function PastYear(yearsAgo: number = 10): PropertyDecorator {\r\n  return applyDecorators(IsDateString({ strict: true }), Validate(PastYearValidator, [yearsAgo]))\r\n}\r\n"]}