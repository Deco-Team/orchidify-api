{"version":3,"file":"firebase.controller.js","sourceRoot":"/","sources":["firebase/controllers/firebase.controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,2CAAyE;AACzE,6CAA4G;AAC5G,4BAA2B;AAE3B,oDAAqD;AACrD,2EAAwD;AACxD,8DAAqD;AACrD,qEAA0D;AAC1D,+DAAqD;AACrD,6EAA+E;AAC/E,8FAAsG;AAQ/F,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IAC7B,YAEmB,eAAqC;QAArC,oBAAe,GAAf,eAAe,CAAsB;IACrD,CAAC;IAOE,AAAN,KAAK,CAAC,iBAAiB,CAAQ,GAAG;QAChC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAA;QAC9E,OAAO,EAAE,KAAK,EAAE,CAAA;IAClB,CAAC;CACF,CAAA;AAfY,gDAAkB;AAWvB;IALL,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,IAAI,mBAAQ,CAAC,OAAO,KAAK,mBAAQ,CAAC,UAAU,uBAAuB;KAC7E,CAAC;IACD,IAAA,uBAAa,EAAC,EAAE,IAAI,EAAE,wEAAqC,EAAE,CAAC;IAC9D,IAAA,aAAI,EAAC,cAAc,CAAC;IACI,WAAA,IAAA,YAAG,GAAE,CAAA;;;;2DAG7B;6BAdU,kBAAkB;IAN9B,IAAA,iBAAO,EAAC,UAAU,CAAC;IACnB,IAAA,uBAAa,GAAE;IACf,IAAA,+BAAqB,EAAC,EAAE,IAAI,EAAE,mBAAa,EAAE,CAAC;IAC9C,IAAA,kBAAS,EAAC,6BAAY,CAAC,YAAY,EAAE,wBAAU,CAAC;IAChD,IAAA,uBAAK,EAAC,mBAAQ,CAAC,UAAU,EAAE,mBAAQ,CAAC,OAAO,CAAC;IAC5C,IAAA,mBAAU,GAAE;IAGR,WAAA,IAAA,eAAM,EAAC,4CAAoB,CAAC,CAAA;;GAFpB,kBAAkB,CAe9B","sourcesContent":["import { Controller, UseGuards, Inject, Req, Post } from '@nestjs/common'\r\nimport { ApiBadRequestResponse, ApiBearerAuth, ApiOkResponse, ApiOperation, ApiTags } from '@nestjs/swagger'\r\nimport * as _ from 'lodash'\r\n\r\nimport { ErrorResponse } from '@common/contracts/dto'\r\nimport { Roles } from '@auth/decorators/roles.decorator'\r\nimport { UserRole } from '@common/contracts/constant'\r\nimport { JwtAuthGuard } from '@auth/guards/jwt-auth.guard'\r\nimport { RolesGuard } from '@auth/guards/roles.guard'\r\nimport { IFirebaseAuthService } from '@firebase/services/firebase.auth.service'\r\nimport { CreateCustomTokenFirebaseDataResponse } from '@firebase/dto/create-custom-token.firebase.dto'\r\n\r\n@ApiTags('Firebase')\r\n@ApiBearerAuth()\r\n@ApiBadRequestResponse({ type: ErrorResponse })\r\n@UseGuards(JwtAuthGuard.ACCESS_TOKEN, RolesGuard)\r\n@Roles(UserRole.INSTRUCTOR, UserRole.LEARNER)\r\n@Controller()\r\nexport class FirebaseController {\r\n  constructor(\r\n    @Inject(IFirebaseAuthService)\r\n    private readonly firebaseService: IFirebaseAuthService\r\n  ) {}\r\n\r\n  @ApiOperation({\r\n    summary: `[${UserRole.LEARNER}, ${UserRole.INSTRUCTOR}] Create Custom Token`\r\n  })\r\n  @ApiOkResponse({ type: CreateCustomTokenFirebaseDataResponse })\r\n  @Post('custom-token')\r\n  async createCustomToken(@Req() req) {\r\n    const token = await this.firebaseService.createCustomToken(_.get(req, 'user'))\r\n    return { token }\r\n  }\r\n}\r\n"]}