{"version":3,"file":"firebase.module.js","sourceRoot":"/","sources":["firebase/firebase.module.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2CAAuC;AACvC,wCAAuC;AACvC,4EAA4F;AAC5F,yEAAmE;AACnE,4DAAwD;AACxD,2EAAsE;AACtE,4EAA4F;AAC5F,8DAAuD;AACvD,uEAAgE;AAChE,sFAA2G;AAC3G,sFAA2G;AAE3G,MAAM,gBAAgB,GAAG;IACvB,OAAO,EAAE,cAAc;IACvB,MAAM,EAAE,CAAC,iCAAe,CAAC;IACzB,UAAU,EAAE,KAAK,EAAE,cAA+B,EAAE,EAAE;QACpD,MAAM,cAAc,GAAG,CAAC,CAAC,MAAM,cAAc,CAAC,SAAS,CAAC,qBAAU,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK;YACvF,EAAE,CAAyB,CAAA;QAE7B,OAAO,KAAK,CAAC,aAAa,CAAC;YACzB,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC;YACjD,WAAW,EAAE,WAAW,cAAc,CAAC,SAAS,iBAAiB;SAClE,CAAC,CAAA;IACJ,CAAC;CACF,CAAA;AAuCM,IAAM,cAAc,GAApB,MAAM,cAAc;CAAG,CAAA;AAAjB,wCAAc;yBAAd,cAAc;IArC1B,IAAA,eAAM,EAAC;QACN,OAAO,EAAE,CAAC,8BAAa,EAAE,oCAAgB,CAAC;QAC1C,WAAW,EAAE,CAAC,wCAAkB,CAAC;QACjC,SAAS,EAAE;YACT,gBAAgB;YAChB;gBACE,OAAO,EAAE,yCAAmB;gBAC5B,QAAQ,EAAE,wCAAkB;aAC7B;YACD;gBACE,OAAO,EAAE,4CAAoB;gBAC7B,QAAQ,EAAE,2CAAmB;aAC9B;YACD;gBACE,OAAO,EAAE,sDAAyB;gBAClC,QAAQ,EAAE,qDAAwB;aACnC;YACD;gBACE,OAAO,EAAE,sDAAyB;gBAClC,QAAQ,EAAE,qDAAwB;aACnC;SACF;QACD,OAAO,EAAE;YACP;gBACE,OAAO,EAAE,4CAAoB;gBAC7B,QAAQ,EAAE,2CAAmB;aAC9B;YACD;gBACE,OAAO,EAAE,sDAAyB;gBAClC,QAAQ,EAAE,qDAAwB;aACnC;YACD;gBACE,OAAO,EAAE,sDAAyB;gBAClC,QAAQ,EAAE,qDAAwB;aACnC;SACF;KACF,CAAC;GACW,cAAc,CAAG","sourcesContent":["import { Module } from '@nestjs/common'\r\nimport * as admin from 'firebase-admin'\r\nimport { FirebaseRepository, IFirebaseRepository } from './repositories/firebase.repository'\r\nimport { ISettingService } from '@setting/services/setting.service'\r\nimport { SettingKey } from '@setting/contracts/constant'\r\nimport { FirebaseController } from './controllers/firebase.controller'\r\nimport { FirebaseAuthService, IFirebaseAuthService } from './services/firebase.auth.service'\r\nimport { LearnerModule } from '@learner/learner.module'\r\nimport { InstructorModule } from '@instructor/instructor.module'\r\nimport { FirebaseMessagingService, IFirebaseMessagingService } from './services/firebase.messaging.service'\r\nimport { FirebaseFirestoreService, IFirebaseFirestoreService } from './services/firebase.firestore.service'\r\n\r\nconst firebaseProvider = {\r\n  provide: 'FIREBASE_APP',\r\n  inject: [ISettingService],\r\n  useFactory: async (settingService: ISettingService) => {\r\n    const firebaseConfig = ((await settingService.findByKey(SettingKey.FirebaseConfig)).value ||\r\n      {}) as admin.ServiceAccount\r\n\r\n    return admin.initializeApp({\r\n      credential: admin.credential.cert(firebaseConfig),\r\n      databaseURL: `https://${firebaseConfig.projectId}.firebaseio.com`\r\n    })\r\n  }\r\n}\r\n\r\n@Module({\r\n  imports: [LearnerModule, InstructorModule],\r\n  controllers: [FirebaseController],\r\n  providers: [\r\n    firebaseProvider,\r\n    {\r\n      provide: IFirebaseRepository,\r\n      useClass: FirebaseRepository\r\n    },\r\n    {\r\n      provide: IFirebaseAuthService,\r\n      useClass: FirebaseAuthService\r\n    },\r\n    {\r\n      provide: IFirebaseMessagingService,\r\n      useClass: FirebaseMessagingService\r\n    },\r\n    {\r\n      provide: IFirebaseFirestoreService,\r\n      useClass: FirebaseFirestoreService\r\n    },\r\n  ],\r\n  exports: [\r\n    {\r\n      provide: IFirebaseAuthService,\r\n      useClass: FirebaseAuthService\r\n    },\r\n    {\r\n      provide: IFirebaseMessagingService,\r\n      useClass: FirebaseMessagingService\r\n    },\r\n    {\r\n      provide: IFirebaseFirestoreService,\r\n      useClass: FirebaseFirestoreService\r\n    },\r\n  ]\r\n})\r\nexport class FirebaseModule {}\r\n"]}